(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{84462:function(e,t,r){Promise.resolve().then(r.bind(r,72576))},72576:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var s=r(57437),i=r(2265),a=r(32604),n=r(84424),o=r(16389),l=r(49606),c=r(38098),u=r(80711),d=r(75562),h=r(57916),f=r(91985),p=r(96699),g=r(13185),x=r(13349),y=r(54744),m=()=>{let[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)(""),{getFilterTagsType:m}=(0,i.useContext)(x.FilesContext),[j,w]=(0,i.useState)({data:"",file_ready:!0}),k=async()=>{w({data:"",file_ready:!1});try{await (0,y.gp)(m(e)),v()}catch(e){e instanceof Error?a(e.message):a("An unexpected error occurred.")}},v=()=>{(0,y.p)().then(e=>{w(e.data)}).catch(e=>{w(e=>({...e,file_ready:!0})),a(e.message)})};return(0,i.useEffect)(()=>{v()},[]),(0,i.useEffect)(()=>{j.file_ready||setTimeout(()=>v(),5e3)}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Stack,{children:[(0,s.jsx)(p.Z,{}),(0,s.jsx)(g.Z,{filterMenuDescription:"Select document(s) and/or document type(s) from the list:",filterTags:e,setFilterTags:t}),(0,s.jsxs)(n.Center,{pos:"relative",children:[(0,s.jsx)(l.LoadingOverlay,{visible:!j.file_ready,zIndex:1e3,overlayProps:{radius:"sm",blur:2}}),(0,s.jsx)(c.Tooltip,{label:0===e.length?"Need at least one Tag":"Search Tag(s)",children:(0,s.jsx)(u.Button,{variant:"filled",radius:"xs",disabled:0===e.length,onClick:k,style:{width:"100px"},children:"Search"})})]}),(0,s.jsx)(d.Text,{c:"dimmed",children:j.data})]}),(0,s.jsx)(h.Dialog,{opened:!!r,withCloseButton:!0,onClose:()=>a(""),size:"lg",radius:"md",withBorder:!0,children:(0,s.jsx)(f.Notification,{title:"Search Error",color:"red",onClose:()=>a(""),children:r})})]})},j=()=>(0,s.jsx)(a.Box,{style:{height:"100%"},children:(0,s.jsx)(n.Center,{h:"100%",children:(0,s.jsx)(m,{})})})},13185:function(e,t,r){"use strict";var s=r(57437),i=r(34738),a=r(94970),n=r(75562),o=r(78290),l=r(7238),c=r(84740),u=r(26660),d=r(29433),h=r(2265),f=r(39537),p=r(13349);let g=(0,h.memo)(e=>{let{filterTags:t,setFilterTags:r,filterMenuDescription:g}=e,{files:x}=(0,h.useContext)(p.FilesContext),y=x.map(e=>e["webpage-title"]),m=x.reduce((e,t)=>(e[t["webpage-title"]]={url:t.url,id:1},e),{}),j=x.reduce((e,t)=>(e[t.section]||(e[t.section]=t.section),e),{All:"All"});Object.keys(j).reduce((e,t)=>(e[t]={url:"",id:0},e),m);let w=new Set(y),k=[{group:"Categories",items:Object.keys(j)},{group:"Files",items:Array.from(w)}];return(0,s.jsx)(c.TagsInput,{withAsterisk:!0,description:g,leftSection:(0,s.jsx)(o.ActionIcon,{size:32,radius:"xl",color:f.theme.primaryColor,variant:"white",children:(0,s.jsx)(d.Z,{style:{width:(0,l.h)(18),height:(0,l.h)(18)},stroke:1.5})}),style:{minWidth:"450px",maxWidth:"450px"},placeholder:"Filter tags",data:k,onClear:()=>r([]),clearable:!0,onChange:r,value:t,renderOption:e=>{let{option:t}=e;return(0,s.jsx)(i.Group,{children:(0,s.jsxs)(a.Flex,{justify:"space-between",children:[(0,s.jsx)(n.Text,{children:t.value}),m[t.value].url&&(0,s.jsx)(o.ActionIcon,{size:32,radius:"xl",color:f.theme.primaryColor,variant:"white",onClick:e=>{e.stopPropagation(),window.open(m[t.value].url,"_blank","noreferrer")},children:(0,s.jsx)(u.Z,{style:{width:(0,l.h)(18),height:(0,l.h)(18)},stroke:1.5})})]})})}})});t.Z=g},96699:function(e,t,r){"use strict";var s=r(57437);r(2265);var i=r(32604),a=r(17480),n=r(75562),o=r(15857);t.Z=()=>(0,s.jsx)(i.Box,{style:{maxWidth:"500px"},children:(0,s.jsx)(a.Blockquote,{color:"blue",iconSize:30,icon:(0,s.jsx)(o.Z,{}),mt:"sm",p:12,children:(0,s.jsx)(n.Text,{size:"xs",children:"Please update the files by clicking the 'Update Files' button on the top right and clicking 'update'."})})})},13349:function(e,t,r){"use strict";r.r(t),r.d(t,{FilesContext:function(){return n},FilesProviders:function(){return o}});var s=r(57437),i=r(2265),a=r(54744);let n=(0,i.createContext)({files:[],getFilterTagsType:()=>({categories:[],files:[]})}),o=e=>{let{children:t}=e,[r,o]=(0,i.useState)([]),l=r.reduce((e,t)=>(e[t["webpage-title"]]=t,e),{});return(0,i.useEffect)(()=>{try{(0,a.H)().then(e=>o(e.data))}catch(e){console.log(e),o([])}},[]),(0,s.jsx)(n.Provider,{value:{files:r,getFilterTagsType:e=>e.reduce((e,t)=>(t in l?e.files.push(l[t]["file-name"]):e.categories.push(t),e),{categories:[],files:[]})},children:t})}},39537:function(e,t,r){"use strict";r.r(t),r.d(t,{theme:function(){return s}});let s=(0,r(19905).j)({})},54744:function(e,t,r){"use strict";r.d(t,{H:function(){return a},WD:function(){return o},XW:function(){return n},ZO:function(){return i},gp:function(){return l},mv:function(){return c},p:function(){return u}});var s=r(2599);let i=async(e,t,r,i)=>{console.log(t);let a=!!r,n={data:{"search-terms":e,files:t.files,categories:t.categories,ai:a,prompt:i}},o=await fetch("/search",{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json"}});if(console.log(o),!o.ok)throw console.log("response is not ok"),Error((await o.json()).data);if(!a){let e=await o.blob();(0,s.saveAs)(e,"ouptut.xlsx")}},a=async()=>{let e=await fetch("/data");if(!e.ok)throw Error("Failed to submit the data. Please try again.");return e.json()},n=async()=>{let e=await fetch("/update/info");if(!e.ok)throw Error("Failed to submit the data. Please try again.");return e.json()},o=async()=>{if(!(await fetch("/update")).ok)throw Error("Failed to submit the data. Please try again.")},l=async e=>{console.log(e);let t={data:{files:e.files,categories:e.categories}};console.log(t);let r=await fetch("/search/o3",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json"}});if(!r.ok)throw Error((await r.json()).data)},c=async()=>{let e=await fetch("/search/info");if(!e.ok)throw Error("Unable to get search progress");return e.json()},u=async()=>{let e=await fetch("/data/o3");if(!e.ok)throw Error("Unable to get search progress");return e.json()}},29433:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s=(0,r(27677).Z)("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]])}},function(e){e.O(0,[987,971,69,744],function(){return e(e.s=84462)}),_N_E=e.O()}]);